{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport axios from 'axios';\nimport { REST_API_KEY, REDIRECT_URI } from \"../kakaoLoginData\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst KakaoRedirectHandler = () => {\n  _s();\n\n  const navigate = useNavigate();\n  React.useEffect(() => {\n    let params = new URL(window.location.href).searchParams.get(\"code\");\n    let grant_type = \"authorization_code\";\n\n    const getProfile = async () => {\n      try {\n        let data = await window.Kakao.API.request({\n          url: \"/v2/user/me\"\n        });\n        console.log(data.id);\n        console.log(data.properties.nickname);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    axios.post(`https://kauth.kakao.com/oauth/token?grant_type=${grant_type}&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}&code=${params}`, {\n      headers: {\n        'Content-type': 'application/x-www-form-urlencoded;charset=utf-8'\n      }\n    }).then(res => {\n      window.Kakao.init(REST_API_KEY);\n      window.Kakao.Auth.setAccessToken(res.data.access_token);\n      console.log(res.data);\n      navigate(\"/login\");\n    });\n  }, [navigate]);\n  return null;\n};\n\n_s(KakaoRedirectHandler, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n\n_c = KakaoRedirectHandler;\nexport default KakaoRedirectHandler;\n\nvar _c;\n\n$RefreshReg$(_c, \"KakaoRedirectHandler\");","map":{"version":3,"names":["React","axios","REST_API_KEY","REDIRECT_URI","useNavigate","KakaoRedirectHandler","navigate","useEffect","params","URL","window","location","href","searchParams","get","grant_type","getProfile","data","Kakao","API","request","url","console","log","id","properties","nickname","err","post","headers","then","res","init","Auth","setAccessToken","access_token"],"sources":["D:/web project/todoList/client/src/pages/KakaoLogin.js"],"sourcesContent":["import React from \"react\";\r\nimport axios from 'axios';\r\nimport { REST_API_KEY, REDIRECT_URI } from \"../kakaoLoginData\";\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nconst KakaoRedirectHandler = () => {\r\n  const navigate = useNavigate();\r\n  React.useEffect(()=> {\r\n    let params = new URL(window.location.href).searchParams.get(\"code\");\r\n    let grant_type = \"authorization_code\";\r\n    \r\n    const getProfile = async () => {\r\n      try {\r\n        let data = await window.Kakao.API.request({\r\n          url: \"/v2/user/me\",\r\n        });\r\n        console.log(data.id);\r\n        console.log(data.properties.nickname);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    axios.post(`https://kauth.kakao.com/oauth/token?grant_type=${grant_type}&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}&code=${params}`\r\n      , {\r\n      headers: {\r\n          'Content-type': 'application/x-www-form-urlencoded;charset=utf-8'\r\n      }\r\n    }).then((res) => {\r\n      window.Kakao.init(REST_API_KEY);\r\n      window.Kakao.Auth.setAccessToken(res.data.access_token);\r\n      console.log(res.data);\r\n      navigate(\"/login\");\r\n    })\r\n\r\n    }, [navigate])\r\n  return null;\r\n};\r\n\r\nexport default KakaoRedirectHandler;"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,mBAA3C;AACA,SAAQC,WAAR,QAA0B,kBAA1B;;AAEA,MAAMC,oBAAoB,GAAG,MAAM;EAAA;;EACjC,MAAMC,QAAQ,GAAGF,WAAW,EAA5B;EACAJ,KAAK,CAACO,SAAN,CAAgB,MAAK;IACnB,IAAIC,MAAM,GAAG,IAAIC,GAAJ,CAAQC,MAAM,CAACC,QAAP,CAAgBC,IAAxB,EAA8BC,YAA9B,CAA2CC,GAA3C,CAA+C,MAA/C,CAAb;IACA,IAAIC,UAAU,GAAG,oBAAjB;;IAEA,MAAMC,UAAU,GAAG,YAAY;MAC7B,IAAI;QACF,IAAIC,IAAI,GAAG,MAAMP,MAAM,CAACQ,KAAP,CAAaC,GAAb,CAAiBC,OAAjB,CAAyB;UACxCC,GAAG,EAAE;QADmC,CAAzB,CAAjB;QAGAC,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACO,EAAjB;QACAF,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACQ,UAAL,CAAgBC,QAA5B;MACD,CAND,CAME,OAAOC,GAAP,EAAY;QACZL,OAAO,CAACC,GAAR,CAAYI,GAAZ;MACD;IACF,CAVD;;IAYA1B,KAAK,CAAC2B,IAAN,CAAY,kDAAiDb,UAAW,cAAab,YAAa,iBAAgBC,YAAa,SAAQK,MAAO,EAA9I,EACI;MACFqB,OAAO,EAAE;QACL,gBAAgB;MADX;IADP,CADJ,EAKGC,IALH,CAKSC,GAAD,IAAS;MACfrB,MAAM,CAACQ,KAAP,CAAac,IAAb,CAAkB9B,YAAlB;MACAQ,MAAM,CAACQ,KAAP,CAAae,IAAb,CAAkBC,cAAlB,CAAiCH,GAAG,CAACd,IAAJ,CAASkB,YAA1C;MACAb,OAAO,CAACC,GAAR,CAAYQ,GAAG,CAACd,IAAhB;MACAX,QAAQ,CAAC,QAAD,CAAR;IACD,CAVD;EAYC,CA5BH,EA4BK,CAACA,QAAD,CA5BL;EA6BA,OAAO,IAAP;AACD,CAhCD;;GAAMD,oB;UACaD,W;;;KADbC,oB;AAkCN,eAAeA,oBAAf"},"metadata":{},"sourceType":"module"}